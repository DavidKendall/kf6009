---
layout: default
title: Pluscal, TLA+, TLC - Essential modelling techniques and invariant checking
<!--license: https://github.com/DavidKendall/blinky/blob/master/LICENSE-->
---
* TOC
{: toc}

## Introduction

Aims

* Make progress with Pluscal, TLA+ and TLC in modelling and analysing some simple systems
* Use Pluscal, TLA+ and TLC to model and analyse some simple invariants

## Modelling with Pluscal

1. Create a Pluscal specification for the Die hard problem discussed in the
   lecture. Save the specification and use the toolbox to translate it into TLA+.
   Create a TLC model and enter an invariant that claims that the amount in
   the big jug is not 4 gallons. Run the model checker and examine the error trace to
   discover the sequence of steps needed to get 4 gallons into the big jug.

1. Create a Pluscal specification of the Bank Account discussed in the lecture.
   Save the specification and use the toolbox to translate it into TLA+.
   Create a TLC model and enter a property that asserts that when both
   processes have finished execution, the value of the balance must be 80.
   Run the model checker and examine the error trace to discover the
   sequence of steps that violates your property.

1. Create a Pluscal model of a 2 process system comprising processes `P1` and
   `P2`. `P1` tests if global variable `y` is 0 and, if it is, it updates the value
   of global variable `x` to 1. `P2` tests if global variable `x` is 0 and, 
   if it is, it updates the value of global variable `y` to 1. Make sure that
   you give distinct labels to the lines containing the test and the update.
   Create a TLC model and enter an invariant that claims that when both
   processes have finished their execution, it is not possible for the
   values of both global variables to be 1. Run the model checker and
   examine the error trace to discover the sequence of steps that
   violates your property. <br/>
   **Note:** The Pluscal `if` statement takes the form

   ```
   if <test> then 
     <t_clause>
   else
     <e_clause>
   end if
   ```
   See pages 21 and 22 in the [Pluscal User Manual: p-syntax]({{site.baseurl}}{{site.raurl}}/p-manual.pdf).

1. Create a Pluscal model of the Building Control System that you implemented in 
   TLA+ last time (see the lecture and lab for week 2 if you need a reminder
   of the system requirements). Specify and check the same properties that
   you investigated last time.

## Homework

1. Ensure that you are up to date with all exercises so far.

1. Watch [Lamport's Two-Phase Commit Video](https://lamport.azurewebsites.net/video/video6.html). 

1. Read the [Pluscal User Manual: p-syntax]({{site.baseurl}}{{site.raurl}}/p-manual.pdf).



